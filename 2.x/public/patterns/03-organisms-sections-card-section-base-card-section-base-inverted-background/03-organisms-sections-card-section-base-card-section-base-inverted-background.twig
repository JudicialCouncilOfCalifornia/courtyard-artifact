{% set card_template = card_section.card_template|default('@molecules/blocks/card-base/card-base.twig') %}

{% if card_section.headergroup %}
  {% set headergroup = card_section.headergroup %}
{% endif %}

{% set classes = [
  'jcc-cards',
  headergroup.layout.alignment == 'center' ? 'jcc-cards--centered' : '',
  card_section.background ? 'jcc-cards-background--' ~ card_section.background ~ ' margin-bottom-4' : '',
]|merge(card_section.classes|default([''])) %}

<div class="{{ classes|join(' ')|trim }} jcc-scheme-simple"{% if card_section.id %} id="{{ card_section.id }}"{% endif %}>
  <div class="jcc-cards__container">
    {% if headergroup %}
      {% set headergroup_layout_classes = [
        'margin-bottom-4',
        headergroup.layout.spacing ? headergroup.layout.spacing: '',
        headergroup.layout.alignment ? 'text-' ~ headergroup.layout.alignment : '',
      ]|merge(headergroup_layout_classes|default([''])) %}

      {% include '@molecules/text/header-group/header-group.twig' with {
        headergroup: {
          brow: headergroup.brow,
          title: headergroup.title,
          lead: headergroup.lead,
          layout: headergroup_layout_classes|join(' ')|trim ,
        }
      } %}
    {% endif %}

    <div class="jcc-cards__row grid-row padding-x-0">
      {% for card in card_section.cards %}
        {% include card_template with {
          card: card
        } %}
      {% endfor %}
    </div>
  </div>
</div>
