{% set attributes = button.attributes ? button.attributes : create_attribute() %}

{% if button.disabled %}
  {# {% set attributes = attributes.addAttribute('disabled') %} #}
{% endif %}

{% set classes = [
  'usa-button',
  button.style ? 'usa-button--' ~ button.style,
  button.state ? 'usa-button--' ~ button.state,
  button.other ? button.other,
  button.type == 'external' ? 'ext',
]|merge(button.classes|default([''])) %}

{% if button.type == 'button' %}
  <button {{ attributes.addClass(classes) }} {% if button.aria_label %}aria_label="{{ button.aria_label }}"{% endif %} {{ button.disabled ? 'disabled' }}>
    {{- button.text -}}
  </button>
{% elseif button.type == 'external' %}
  <a {{ attributes.addClass(classes) }} href="{{ button.url }}" {{ button.disabled ? 'disabled' }}>
    {{- button.text -}}
    <svg focusable="false" class="ext" role="img" aria-label="(link is external)" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 80 40"><metadata><sfw xmlns="http://ns.adobe.com/SaveForWeb/1.0/"><slicesourcebounds y="-8160" x="-8165" width="16389" height="16384" bottomleftorigin="true"></slicesourcebounds><optimizationsettings><targetsettings targetsettingsid="0" fileformat="PNG24Format"><png24format transparency="true" filtered="false" interlaced="false" nomattecolor="false" mattecolor="#FFFFFF"></png24format></targetsettings></optimizationsettings></sfw></metadata><title>(link is external)</title><path d="M48 26c-1.1 0-2 0.9-2 2v26H10V18h26c1.1 0 2-0.9 2-2s-0.9-2-2-2H8c-1.1 0-2 0.9-2 2v40c0 1.1 0.9 2 2 2h40c1.1 0 2-0.9 2-2V28C50 26.9 49.1 26 48 26z"></path><path d="M56 6H44c-1.1 0-2 0.9-2 2s0.9 2 2 2h7.2L30.6 30.6c-0.8 0.8-0.8 2 0 2.8C31 33.8 31.5 34 32 34s1-0.2 1.4-0.6L54 12.8V20c0 1.1 0.9 2 2 2s2-0.9 2-2V8C58 6.9 57.1 6 56 6z"></path></svg>
  </a>
{% else %}
  <a {{ attributes.addClass(classes) }} href="{{ button.url }}" {{ button.disabled ? 'disabled' }}>
    {{- button.text -}}
  </a>
{% endif %}
